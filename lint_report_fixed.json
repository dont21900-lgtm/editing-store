[{"filePath":"D:\\editing site\\edit.flow\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\editing site\\edit.flow\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\editing site\\edit.flow\\src\\App.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'updatePassword' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":7,"column":76,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":90,"suggestions":[{"messageId":"removeVar","data":{"varName":"updatePassword"},"fix":{"range":[1112,1128],"text":""},"desc":"Remove unused variable 'updatePassword'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":274,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":274,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":280,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":280,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":466,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":466,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[25400,25412],"text":""},"desc":"Remove unused variable 'Icon'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isMobileMenuOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":520,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":520,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"isMobileMenuOpen"},"fix":{"range":[36904,36920],"text":""},"desc":"Remove unused variable 'isMobileMenuOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setIsMobileMenuOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":520,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":520,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"setIsMobileMenuOpen"},"fix":{"range":[36920,36941],"text":""},"desc":"Remove unused variable 'setIsMobileMenuOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setActiveCategory' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":521,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":521,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"setActiveCategory"},"fix":{"range":[36985,37004],"text":""},"desc":"Remove unused variable 'setActiveCategory'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setSearchTerm' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":522,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":522,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"setSearchTerm"},"fix":{"range":[37044,37059],"text":""},"desc":"Remove unused variable 'setSearchTerm'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'showRegistration' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":532,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":532,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"showRegistration"},"fix":{"range":[37625,37641],"text":""},"desc":"Remove unused variable 'showRegistration'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setShowRegistration' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":532,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":532,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"setShowRegistration"},"fix":{"range":[37641,37662],"text":""},"desc":"Remove unused variable 'setShowRegistration'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'uploadProgress' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":536,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":536,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"uploadProgress"},"fix":{"range":[37816,37830],"text":""},"desc":"Remove unused variable 'uploadProgress'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'uploadStatus' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":537,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":537,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"uploadStatus"},"fix":{"range":[37875,37887],"text":""},"desc":"Remove unused variable 'uploadStatus'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'showPasswordChange' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":539,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":539,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"showPasswordChange"},"fix":{"range":[38004,38022],"text":""},"desc":"Remove unused variable 'showPasswordChange'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setShowPasswordChange' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":539,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":539,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"setShowPasswordChange"},"fix":{"range":[38022,38045],"text":""},"desc":"Remove unused variable 'setShowPasswordChange'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'newAdminPassword' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":540,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":540,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"newAdminPassword"},"fix":{"range":[38075,38091],"text":""},"desc":"Remove unused variable 'newAdminPassword'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setNewAdminPassword' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":540,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":540,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"setNewAdminPassword"},"fix":{"range":[38091,38112],"text":""},"desc":"Remove unused variable 'setNewAdminPassword'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'showSuccessModal' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":545,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":545,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"showSuccessModal"},"fix":{"range":[38457,38473],"text":""},"desc":"Remove unused variable 'showSuccessModal'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setShowSuccessModal' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":545,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":545,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"setShowSuccessModal"},"fix":{"range":[38473,38494],"text":""},"desc":"Remove unused variable 'setShowSuccessModal'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'aiDescPrompt' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":549,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":549,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"aiDescPrompt"},"fix":{"range":[38707,38719],"text":""},"desc":"Remove unused variable 'aiDescPrompt'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setAiDescPrompt' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":549,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":549,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setAiDescPrompt"},"fix":{"range":[38719,38736],"text":""},"desc":"Remove unused variable 'setAiDescPrompt'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'categories' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":574,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":574,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"categories"},"fix":{"range":[39844,39914],"text":""},"desc":"Remove unused variable 'categories'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":621,"column":311,"nodeType":"Identifier","messageId":"unusedVar","endLine":621,"endColumn":314},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":621,"column":316,"nodeType":"BlockStatement","messageId":"unexpected","endLine":621,"endColumn":318,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[42368,42368],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":627,"column":188,"nodeType":"Identifier","messageId":"unusedVar","endLine":627,"endColumn":189},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":627,"column":191,"nodeType":"BlockStatement","messageId":"unexpected","endLine":627,"endColumn":193,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[42636,42636],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchStats'. Either include it or remove the dependency array.","line":646,"column":38,"nodeType":"ArrayExpression","endLine":646,"endColumn":55,"suggestions":[{"desc":"Update the dependencies array to be: [fetchStats, isSessionActive]","fix":{"range":[43480,43497],"text":"[fetchStats, isSessionActive]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":810,"column":458,"nodeType":"Identifier","messageId":"unusedVar","endLine":810,"endColumn":461},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":814,"column":181,"nodeType":"Identifier","messageId":"unusedVar","endLine":814,"endColumn":182},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":814,"column":184,"nodeType":"BlockStatement","messageId":"unexpected","endLine":814,"endColumn":186,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[54263,54263],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":829,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":829,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[55162,55167],"text":"()"},"desc":"Remove unused variable 'error'."}]}],"suppressedMessages":[],"errorCount":29,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\nimport { ShoppingBag, X, Menu, Search, Star, Play, ArrowRight, Mail, CheckCircle, Plus, Minus, Instagram, Twitter, Youtube, Upload, Lock, LogOut, FileText, Trash2, Video, Eye, Loader2, CreditCard, Key, ScanFace, ShieldCheck, UserPlus, Edit, Save, Download, Zap, Shield, Globe, Users, Link as LinkIcon, Image as ImageIcon, BarChart3, TrendingUp, DollarSign, Package, MonitorPlay, Type, Wand2, DownloadCloud, Layout, Maximize2, Minimize2, Smartphone, Monitor, Sliders, Sun, Aperture, Droplet, Palette, RotateCcw, Sparkles, Bot, Layers, Music, Scissors, Settings, MousePointer2, Volume2, VolumeX, ChevronLeft, MessageSquare, Send, Code, Copy, Terminal, Mic, MicOff, Paperclip, ImagePlus, AlertTriangle, Eraser, Clock } from 'lucide-react';\n\n// --- FIREBASE IMPORTS ---\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, getDocs, addDoc, deleteDoc, updateDoc, doc, orderBy, query, setDoc, getDoc, increment, serverTimestamp } from \"firebase/firestore\";\nimport { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged, updatePassword } from \"firebase/auth\";\n\n// ------------------------------------------------------------\n// âœ… FIREBASE CONFIGURATION\n// ------------------------------------------------------------\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCFaUYrkeSFOJZyvOUjkOPJy5CvLeejODk\", \n  authDomain: \"edit-flow-store.firebaseapp.com\",\n  projectId: \"edit-flow-store\",\n  storageBucket: \"edit-flow-store.firebasestorage.app\",\n  messagingSenderId: \"857982231876\",\n  appId: \"1:857982231876:web:a7dd2f4609b58be9bde311\",\n  measurementId: \"G-K1J4HF81F3\"\n};\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst auth = getAuth(app);\n\n// ------------------------------------------------------------\n// â˜ï¸ CLOUDINARY CONFIGURATION\n// ------------------------------------------------------------\nconst CLOUDINARY_CLOUD_NAME = \"dwwrerahf\"; \nconst CLOUDINARY_UPLOAD_PRESET = \"njuvozne\"; \n\nconst RAZORPAY_KEY_ID = \"rzp_live_RyGyJvTYktAob8\"; \nconst GEMINI_API_KEY = \"AIzaSyDFQScuI7EG2qbBIP8pAUN4TVwlbKyDZaE\"; \n\n// --- HELPER: LOAD RAZORPAY SCRIPT ---\nconst loadRazorpayScript = () => {\n  return new Promise((resolve) => {\n    const script = document.createElement('script');\n    script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n    script.onload = () => resolve(true);\n    script.onerror = () => resolve(false);\n    document.body.appendChild(script);\n  });\n};\n\n// ------------------------------------------------------------\n// âœ¨ GEMINI AI HELPER\n// ------------------------------------------------------------\nconst fileToGenerativePart = async (file) => {\n  const base64EncodedDataPromise = new Promise((resolve) => {\n    const reader = new FileReader();\n    reader.onloadend = () => resolve(reader.result.split(',')[1]);\n    reader.readAsDataURL(file);\n  });\n  return {\n    inlineData: { data: await base64EncodedDataPromise, mimeType: file.type },\n  };\n};\n\nconst generateAIContent = async (prompt, systemInstruction = \"\", imageFile = null, jsonMode = false) => {\n  const apiKey = GEMINI_API_KEY; \n  const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;\n\n  if (!apiKey) return \"API Key Missing.\";\n\n  const userParts = [{ text: prompt }];\n  if (imageFile) {\n      const imagePart = await fileToGenerativePart(imageFile);\n      userParts.push(imagePart);\n  }\n\n  const payload = {\n    contents: [{ role: \"user\", parts: userParts }],\n    systemInstruction: { parts: [{ text: systemInstruction }] }\n  };\n\n  if (jsonMode) {\n    payload.generationConfig = {\n      responseMimeType: \"application/json\",\n      responseSchema: {\n        type: \"OBJECT\",\n        properties: {\n          action: { type: \"STRING\" },\n          response: { type: \"STRING\" },\n          color: { type: \"STRING\" },\n          page: { type: \"STRING\" },\n          code: { type: \"STRING\" },\n          language: { type: \"STRING\" },\n          image_prompt: { type: \"STRING\" },\n          exposure: { type: \"INTEGER\" },\n          contrast: { type: \"INTEGER\" },\n          saturation: { type: \"INTEGER\" },\n          hue: { type: \"INTEGER\" },\n          blur: { type: \"INTEGER\" },\n          temperature: { type: \"INTEGER\" },\n          tint: { type: \"INTEGER\" }\n        }\n      }\n    };\n  }\n\n  try {\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload)\n    });\n    const data = await response.json();\n    if (data.error) throw new Error(data.error.message);\n    const resultText = data.candidates?.[0]?.content?.parts?.[0]?.text;\n    if (jsonMode && resultText) return JSON.parse(resultText);\n    return resultText;\n  } catch (error) {\n    console.error(\"Gemini AI Error:\", error);\n    if (jsonMode) return { action: \"chat\", response: \"Error: \" + error.message };\n    return \"Error connecting to AI. Please try again.\";\n  }\n};\n\nconst generateImageFromText = async (prompt) => {\n    const apiKey = GEMINI_API_KEY;\n    const url = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-001:predict?key=${apiKey}`;\n    const payload = { instances: [{ prompt: prompt }], parameters: { sampleCount: 1 } };\n    try {\n        const response = await fetch(url, {\n            method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify(payload)\n        });\n        const data = await response.json();\n        if (data.error) throw new Error(data.error.message);\n        return `data:image/png;base64,${data.predictions[0].bytesBase64Encoded}`;\n    } catch (error) { console.error(\"Image Gen Error:\", error); throw error; }\n};\n\n// --- ERROR BOUNDARY ---\nclass ErrorBoundary extends React.Component {\n  constructor(props) { super(props); this.state = { hasError: false, error: null }; }\n  static getDerivedStateFromError(error) { return { hasError: true, error }; }\n  componentDidCatch(error, errorInfo) { console.error(\"Uncaught error:\", error, errorInfo); }\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen bg-neutral-950 flex items-center justify-center text-white p-8\">\n            <div className=\"bg-red-500/10 border border-red-500 p-6 rounded-2xl max-w-lg text-center\">\n                <AlertTriangle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\n                <h1 className=\"text-2xl font-bold mb-2\">Something went wrong</h1>\n                <p className=\"text-neutral-400 mb-4\">Please refresh the page. Error: {this.state.error?.message}</p>\n                <button onClick={() => window.location.reload()} className=\"bg-white text-black px-6 py-2 rounded-lg font-bold\">Refresh Page</button>\n            </div>\n        </div>\n      );\n    }\n    return this.props.children; \n  }\n}\n\n// ------------------------------------------------------------\n// ðŸŽ¬ NETFLIX-STYLE INTRO COMPONENT\n// ------------------------------------------------------------\nconst IntroOverlay = ({ onComplete }) => {\n  const [animationState, setAnimationState] = useState('initial'); // initial -> reveal -> zoom -> exit\n\n  useEffect(() => {\n    const t1 = setTimeout(() => setAnimationState('reveal'), 100);\n    const t2 = setTimeout(() => setAnimationState('zoom'), 2500);\n    const t3 = setTimeout(() => {\n        setAnimationState('exit');\n        setTimeout(onComplete, 500); \n    }, 3100);\n\n    return () => { clearTimeout(t1); clearTimeout(t2); clearTimeout(t3); };\n  }, [onComplete]);\n\n  if (animationState === 'done') return null;\n\n  return (\n    <div className={`fixed inset-0 z-[9999] bg-black flex items-center justify-center overflow-hidden transition-opacity duration-700 ease-out ${animationState === 'exit' ? 'opacity-0' : 'opacity-100'}`}>\n        <style>{`\n            @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap');\n            .netflix-font { font-family: 'Bebas Neue', sans-serif; letter-spacing: 2px; }\n        `}</style>\n        \n        <div className={`relative transition-all duration-[800ms] ease-in-out transform ${animationState === 'zoom' ? 'scale-[20] opacity-0' : 'scale-100 opacity-100'}`}>\n            <h1 className=\"netflix-font text-7xl md:text-[10rem] leading-none flex items-center gap-1 md:gap-4 select-none\">\n                <span className={`text-[#E50914] inline-block transition-all duration-[1200ms] cubic-bezier(0.22, 1, 0.36, 1) transform ${animationState === 'initial' ? '-translate-x-32 opacity-0 scale-50' : 'translate-x-0 opacity-100 scale-100'}`} style={{ textShadow: '0 0 60px rgba(229, 9, 20, 0.6)' }}>\n                    EDIT\n                </span>\n                <span className={`text-[#E50914] inline-block transition-all duration-[1200ms] delay-200 cubic-bezier(0.22, 1, 0.36, 1) transform ${animationState === 'initial' ? 'translate-x-32 opacity-0 scale-50' : 'translate-x-0 opacity-100 scale-100'}`} style={{ textShadow: '0 0 60px rgba(229, 9, 20, 0.6)' }}>\n                    FLOW\n                </span>\n            </h1>\n        </div>\n    </div>\n  );\n};\n\n// --- COMING SOON PAGE ---\nconst ComingSoonPage = ({ onGoBack }) => (\n  <div className=\"min-h-screen flex flex-col items-center justify-center bg-black text-white p-8 text-center relative overflow-hidden\">\n      <div className=\"absolute inset-0 z-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]\"></div>\n      \n      <div className=\"relative z-10 flex flex-col items-center max-w-2xl\">\n          <div className=\"mb-8 p-4 bg-white/5 rounded-2xl border border-white/10\">\n              <Wand2 className=\"w-8 h-8 text-neutral-400\" />\n          </div>\n          <h1 className=\"text-4xl md:text-5xl font-bold mb-6 tracking-tight text-white\">Studio Beta</h1>\n          <p className=\"text-lg text-neutral-400 mb-10 leading-relaxed max-w-md mx-auto\">\n              We are currently fine-tuning our advanced editing tools. This area is reserved for administrators during the calibration phase.\n          </p>\n          <button onClick={onGoBack} className=\"px-8 py-3 bg-white text-black text-sm font-semibold rounded-lg hover:bg-neutral-200 transition-colors\">\n              Return to Store\n          </button>\n      </div>\n  </div>\n);\n\n// --- AI ASSISTANT COMPONENT ---\nconst AIAssistant = ({ onAction, activeTab, storeStats }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [input, setInput] = useState(\"\");\n  const [messages, setMessages] = useState([\n    { role: 'ai', text: \"Systems Online. How can I help?\" }\n  ]);\n  const [isThinking, setIsThinking] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const [chatImage, setChatImage] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  useEffect(() => scrollToBottom(), [messages, isOpen]);\n  const copyToClipboard = (text) => { navigator.clipboard.writeText(text); alert(\"Copied!\"); };\n\n  const startListening = () => {\n    // FIX: Check if browser supports speech recognition\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) { \n        alert(\"Your browser does not support voice input. Please try Chrome or Edge.\"); \n        return; \n    }\n    \n    const recognition = new SpeechRecognition();\n    recognition.continuous = false; \n    recognition.interimResults = false; \n    recognition.lang = 'en-US';\n    \n    recognition.onstart = () => setIsListening(true);\n    recognition.onend = () => setIsListening(false);\n    recognition.onerror = (event) => { console.error(\"Speech error\", event); setIsListening(false); };\n    recognition.onresult = (event) => { setInput(event.results[0][0].transcript); };\n    \n    recognition.start();\n  };\n\n  const handleImageUpload = (e) => { if (e.target.files[0]) setChatImage(e.target.files[0]); };\n\n  const handleSend = async () => {\n    if (!input.trim() && !chatImage) return;\n    const userText = input;\n    const userImg = chatImage ? URL.createObjectURL(chatImage) : null;\n    \n    setMessages(prev => [...prev, { role: 'user', text: userText, image: userImg }]);\n    setInput(\"\"); setChatImage(null); setIsThinking(true);\n\n    try {\n        const statsInfo = storeStats ? `Revenue: â‚¹${storeStats.totalRevenue || 0}, Orders: ${storeStats.totalOrders || 0}` : \"No data.\";\n        const systemPrompt = `AI Manager for Edit.Flow. Stats: ${statsInfo}. Context: ${activeTab}.`;\n        const data = await generateAIContent(userText, systemPrompt, chatImage, true);\n        if (data.action === 'theme' || data.action === 'navigate') onAction(data);\n\n        if (data.action === 'generate_image' && data.image_prompt) {\n            setMessages(prev => [...prev, { role: 'ai', text: `Generating image...` }]);\n            try {\n                const imgUrl = await generateImageFromText(data.image_prompt);\n                setMessages(prev => [...prev, { role: 'ai', text: \"Generated image:\", generatedImage: imgUrl }]);\n            } catch (err) { setMessages(prev => [...prev, { role: 'ai', text: \"Image generation failed.\" }]); }\n        } else {\n            let responseText = \"Task complete.\";\n            if (data.response) responseText = typeof data.response === 'string' ? data.response : JSON.stringify(data.response);\n            setMessages(prev => [...prev, { role: 'ai', text: responseText, code: data.code, language: data.language }]);\n        }\n    } catch (error) { setMessages(prev => [...prev, { role: 'ai', text: \"System error.\" }]); } finally { setIsThinking(false); }\n  };\n\n  return (\n    <>\n        <button onClick={() => setIsOpen(!isOpen)} className=\"fixed bottom-8 right-8 z-50 p-4 bg-white/10 backdrop-blur-md border border-white/20 text-white rounded-full shadow-[0_0_30px_rgba(255,255,255,0.2)] hover:scale-110 hover:bg-white/20 transition-all duration-300\">\n            {isOpen ? <X className=\"w-6 h-6\" /> : <Bot className=\"w-6 h-6\" />}\n        </button>\n        {isOpen && (\n            <div className=\"fixed bottom-28 right-8 z-50 w-80 md:w-96 bg-black/80 backdrop-blur-2xl border border-white/10 rounded-3xl shadow-2xl flex flex-col overflow-hidden h-[500px] animate-scale-in\">\n                <div className=\"p-4 border-b border-white/10 flex items-center gap-3\">\n                    <Sparkles className=\"w-5 h-5 text-cyan-400\" />\n                    <span className=\"font-bold text-sm tracking-wide\">JARVIS AI</span>\n                </div>\n                <div className=\"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar\">\n                    {messages.map((msg, idx) => (\n                        <div key={idx} className={`flex flex-col ${msg.role === 'user' ? 'items-end' : 'items-start'}`}>\n                            <div className={`max-w-[85%] p-3 rounded-2xl text-xs leading-relaxed ${msg.role === 'user' ? 'bg-white text-black' : 'bg-white/10 text-white border border-white/5'}`}>{msg.text}</div>\n                            {msg.generatedImage && <img src={msg.generatedImage} className=\"mt-2 rounded-xl border border-white/20 w-full\" />}\n                            {msg.code && (<div className=\"mt-2 w-full max-w-[90%] bg-[#1e1e1e] border border-white/10 rounded-lg overflow-hidden\"><div className=\"flex justify-between items-center px-3 py-1.5 bg-white/5 border-b border-white/5\"><span className=\"text-[10px] font-mono text-blue-400 uppercase\">{msg.language || 'code'}</span><button onClick={() => copyToClipboard(msg.code)} className=\"text-neutral-400 hover:text-white flex items-center gap-1 text-[10px]\"><Copy className=\"w-3 h-3\" /> Copy</button></div><pre className=\"p-3 overflow-x-auto text-[10px] font-mono text-green-400\"><code>{msg.code}</code></pre></div>)}\n                        </div>\n                    ))}\n                    {isThinking && <Loader2 className=\"w-4 h-4 text-white/50 animate-spin\" />}\n                    <div ref={messagesEndRef} />\n                </div>\n                <div className=\"p-4 border-t border-white/10 bg-white/5\">\n                    <div className=\"flex gap-2 relative\">\n                        <label className=\"p-2 bg-white/5 rounded-full hover:bg-white/10 cursor-pointer\"><ImagePlus className=\"w-4 h-4 text-white\" /><input type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={handleImageUpload} /></label>\n                        <div className=\"flex-1 relative\">\n                             <input type=\"text\" placeholder=\"Command...\" className=\"w-full bg-black/50 border border-white/10 rounded-full px-4 py-2.5 text-xs text-white focus:border-cyan-500 outline-none\" value={input} onChange={(e) => setInput(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleSend()} />\n                             <button onClick={startListening} className={`absolute right-2 top-1/2 -translate-y-1/2 p-1.5 rounded-full ${isListening ? 'text-red-500' : 'text-neutral-400'}`}>{isListening ? <MicOff className=\"w-3 h-3\" /> : <Mic className=\"w-3 h-3\" />}</button>\n                        </div>\n                        <button onClick={handleSend} className=\"p-2 bg-white text-black rounded-full hover:scale-105 transition-transform\"><ArrowRight className=\"w-4 h-4\" /></button>\n                    </div>\n                </div>\n            </div>\n        )}\n    </>\n  );\n};\n\n// --- VIDEO EDITOR COMPONENT ---\nconst VideoEditor = ({ onGoBack, accentColor }) => {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const timelineRef = useRef(null);\n  const [videoFile, setVideoFile] = useState(null);\n  const [grading, setGrading] = useState({ exposure: 100, contrast: 100, saturation: 100, hue: 0, blur: 0, temperature: 0, tint: 0 });\n  const [textOverlay, setTextOverlay] = useState('');\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [processing, setProcessing] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const [activeTool, setActiveTool] = useState('settings');\n  const [aiPrompt, setAiPrompt] = useState(\"\");\n  const [isAiGenerating, setIsAiGenerating] = useState(false);\n  const [aspectRatio, setAspectRatio] = useState('original');\n  const [scaleMode, setScaleMode] = useState('fit');\n  \n  const [layers, setLayers] = useState([\n    { id: 'l1', type: 'video', name: 'Main Video', active: true },\n    { id: 'l2', type: 'audio', name: 'Audio Track', active: true }\n  ]);\n  const [isBgRemoved, setIsBgRemoved] = useState(false);\n\n  const handleUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const url = URL.createObjectURL(file);\n      setVideoFile(url);\n      setAspectRatio('original');\n      setIsPlaying(false);\n    }\n  };\n  const handleDragOver = (e) => { e.preventDefault(); setIsDragging(true); };\n  const handleDragLeave = (e) => { e.preventDefault(); setIsDragging(false); };\n  const handleDrop = (e) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const file = e.dataTransfer.files[0];\n    if (file && file.type.startsWith('video/')) {\n        const url = URL.createObjectURL(file);\n        setVideoFile(url);\n        setAspectRatio('original');\n        setIsPlaying(false);\n    }\n  };\n\n  const updateGrading = (key, value) => setGrading(prev => ({ ...prev, [key]: parseFloat(value) }));\n  const handleVolumeChange = (e) => { const newVol = parseFloat(e.target.value); setVolume(newVol); if(videoRef.current) videoRef.current.volume = newVol; setIsMuted(newVol === 0); };\n  const toggleMute = () => { if(videoRef.current) { const newMute = !isMuted; videoRef.current.muted = newMute; setIsMuted(newMute); } };\n  const togglePlay = () => { if (videoRef.current) { if (isPlaying) videoRef.current.pause(); else videoRef.current.play(); setIsPlaying(!isPlaying); } };\n\n  const handleTimelineClick = (e) => {\n    if (!videoRef.current || duration === 0) return;\n    const rect = timelineRef.current.getBoundingClientRect();\n    const clickX = e.clientX - rect.left;\n    const percent = Math.max(0, Math.min(1, clickX / rect.width));\n    const newTime = percent * duration;\n    videoRef.current.currentTime = newTime;\n    setCurrentTime(newTime);\n  };\n\n  const addLayer = () => {\n      const id = layers.length + 1;\n      setLayers([...layers, { id: `l${id}`, type: 'generic', name: `Layer ${id}`, active: true }]);\n  };\n\n  const handleRemoveBg = () => {\n      if (!videoFile) return alert(\"Upload video first!\");\n      setIsAiGenerating(true);\n      setTimeout(() => {\n          setIsBgRemoved(!isBgRemoved);\n          setIsAiGenerating(false);\n      }, 1500);\n  };\n\n  const handleAIGrading = async () => {\n    if (!aiPrompt) return alert(\"Describe a look!\");\n    setIsAiGenerating(true);\n    try {\n        const systemPrompt = \"Professional colorist. JSON ints: exposure(0-200), contrast(0-200), saturation(0-200), hue(0-360), blur(0-20), temperature(-100 to 100), tint(-100 to 100).\";\n        const newSettings = await generateAIContent(aiPrompt, systemPrompt, null, true);\n        if (newSettings && newSettings.exposure !== undefined) setGrading(prev => ({ ...prev, ...newSettings }));\n    } catch (error) { console.error(error); alert(\"AI Failed.\"); } finally { setIsAiGenerating(false); }\n  };\n\n  const getTargetDimensions = (vidWidth, vidHeight, ratio) => {\n    if (ratio === 'original') return { width: vidWidth, height: vidHeight };\n    const baseSize = Math.max(vidWidth, vidHeight); \n    if (ratio === '16:9') return { width: baseSize, height: baseSize * (9/16) };\n    if (ratio === '9:16') return { width: baseSize * (9/16), height: baseSize };\n    if (ratio === '1:1') return { width: baseSize, height: baseSize };\n    if (ratio === '4:5') return { width: baseSize * (4/5), height: baseSize };\n    return { width: vidWidth, height: vidHeight };\n  };\n\n  useEffect(() => {\n    let animationFrame;\n    const render = () => {\n      const vid = videoRef.current;\n      const cvs = canvasRef.current;\n      const ctx = cvs?.getContext('2d');\n      if (vid && ctx && vid.readyState >= 2) {\n        setCurrentTime(vid.currentTime);\n        setDuration(vid.duration || 0);\n        const { width: targetW, height: targetH } = getTargetDimensions(vid.videoWidth, vid.videoHeight, aspectRatio);\n        const safeW = Math.floor(targetW);\n        const safeH = Math.floor(targetH);\n        if (Math.abs(cvs.width - safeW) > 1 || Math.abs(cvs.height - safeH) > 1) { cvs.width = safeW; cvs.height = safeH; }\n        \n        ctx.filter = `brightness(${grading.exposure}%) contrast(${grading.contrast}%) saturate(${grading.saturation}%) hue-rotate(${grading.hue}deg) blur(${grading.blur}px)`;\n        \n        if (isBgRemoved) {\n            ctx.fillStyle = '#222';\n            ctx.fillRect(0,0, cvs.width, cvs.height);\n             ctx.globalAlpha = 0.8;\n        } else {\n             ctx.fillStyle = '#000000';\n             ctx.fillRect(0, 0, cvs.width, cvs.height);\n             ctx.globalAlpha = 1.0;\n        }\n\n        let drawW, drawH, offsetX, offsetY;\n        const vidRatio = vid.videoWidth / vid.videoHeight;\n        const canvasRatio = cvs.width / cvs.height;\n        if (scaleMode === 'fill') { if (vidRatio > canvasRatio) { drawH = cvs.height; drawW = drawH * vidRatio; offsetY = 0; offsetX = (cvs.width - drawW) / 2; } else { drawW = cvs.width; drawH = drawW / vidRatio; offsetX = 0; offsetY = (cvs.height - drawH) / 2; } } else { if (vidRatio > canvasRatio) { drawW = cvs.width; drawH = drawW / vidRatio; offsetX = 0; offsetY = (cvs.height - drawH) / 2; } else { drawH = cvs.height; drawW = drawH * vidRatio; offsetX = 0; offsetY = (cvs.width - drawW) / 2; } }\n        \n        ctx.drawImage(vid, offsetX, offsetY, drawW, drawH);\n        ctx.filter = 'none';\n        ctx.globalAlpha = 1.0;\n\n        if (grading.temperature !== 0) { ctx.globalCompositeOperation = grading.temperature > 0 ? 'overlay' : 'soft-light'; ctx.fillStyle = grading.temperature > 0 ? `rgba(255, 140, 0, ${Math.abs(grading.temperature) / 200})` : `rgba(0, 100, 255, ${Math.abs(grading.temperature) / 200})`; ctx.fillRect(0, 0, cvs.width, cvs.height); }\n        if (grading.tint !== 0) { ctx.globalCompositeOperation = 'overlay'; ctx.fillStyle = grading.tint > 0 ? `rgba(255, 0, 255, ${Math.abs(grading.tint) / 200})` : `rgba(0, 255, 0, ${Math.abs(grading.tint) / 200})`; ctx.fillRect(0, 0, cvs.width, cvs.height); }\n        ctx.globalCompositeOperation = 'source-over';\n        if (textOverlay) { const fontSize = Math.floor(cvs.height / 15); ctx.font = `900 ${fontSize}px Inter, Arial`; ctx.fillStyle = \"white\"; ctx.strokeStyle = \"black\"; ctx.lineWidth = fontSize / 10; ctx.textAlign = \"center\"; ctx.strokeText(textOverlay, cvs.width / 2, cvs.height - (fontSize)); ctx.fillText(textOverlay, cvs.width / 2, cvs.height - (fontSize)); }\n      }\n      if (isPlaying) animationFrame = requestAnimationFrame(render);\n    };\n    if(isPlaying) render(); else setTimeout(render, 100);\n    return () => cancelAnimationFrame(animationFrame);\n  }, [isPlaying, grading, textOverlay, aspectRatio, scaleMode, isBgRemoved]);\n  const handleExport = () => { setProcessing(true); setTimeout(() => { setProcessing(false); alert(\"Render Complete! In a real app, this would trigger an ffmpeg server-side render.\"); }, 2000); };\n  const ToolButton = ({ id, icon: Icon, label }) => ( <button onClick={() => setActiveTool(id)} className={`w-full flex flex-col items-center justify-center py-4 gap-1 transition-all border-l-2 ${activeTool === id ? `bg-[#1e1e1e] border-[${accentColor}] text-white` : 'border-transparent text-neutral-400 hover:text-white hover:bg-[#1a1a1a]'}`} style={{ borderColor: activeTool === id ? accentColor : 'transparent' }}><Icon className=\"w-5 h-5\" /><span className=\"text-[10px] font-medium\">{label}</span></button> );\n\n  return (\n    <div className=\"fixed inset-0 bg-[#0f0f0f] text-white z-50 flex flex-col font-sans select-none animate-fade-in\">\n      <div className=\"h-14 border-b border-[#2a2a2a] flex items-center justify-between px-4 bg-[#111]\"><div className=\"flex items-center gap-4\"><button onClick={onGoBack} className=\"text-[#888] hover:text-white flex items-center gap-1.5 px-3 py-1.5 rounded-lg hover:bg-[#222] transition-colors\"><ChevronLeft className=\"w-4 h-4\"/> <span className=\"text-sm font-medium\">Dashboard</span></button><div className=\"h-4 w-[1px] bg-[#333]\"></div><span className=\"font-bold text-sm tracking-wide\">Untitled Project</span></div><div className=\"flex items-center gap-3\"><span className=\"text-xs text-neutral-500\">Auto-saved</span><button onClick={handleExport} disabled={processing} className=\"bg-white text-black px-4 py-1.5 rounded-md text-sm font-bold flex items-center gap-2 hover:bg-neutral-200\">{processing ? <Loader2 className=\"w-4 h-4 animate-spin\"/> : <><Download className=\"w-4 h-4\" /> Export</>}</button></div></div>\n      <div className=\"flex-1 flex overflow-hidden\"><div className=\"w-[72px] bg-[#0e0e0e] border-r border-[#222] flex flex-col pt-2 z-10\"><ToolButton id=\"settings\" icon={Sliders} label=\"Settings\" /><ToolButton id=\"media\" icon={ImageIcon} label=\"Media\" /><ToolButton id=\"text\" icon={Type} label=\"Text\" /><ToolButton id=\"ai\" icon={Sparkles} label=\"Magic Tools\" /></div><div className=\"w-[320px] bg-[#111] border-r border-[#222] flex flex-col z-10 shadow-xl animate-slide-right\"><div className=\"p-5 border-b border-[#222]\"><h3 className=\"font-bold text-lg text-white capitalize\">{activeTool === 'ai' ? 'Magic Tools' : activeTool}</h3></div><div className=\"flex-1 overflow-y-auto p-5 custom-scrollbar space-y-6\">\n           {activeTool === 'settings' && (<div className=\"space-y-6 animate-fade-in\"><div className=\"space-y-3\"><label className=\"text-xs font-bold text-[#666] uppercase tracking-wider\">Canvas Size</label><div className=\"grid grid-cols-2 gap-2\">{['original', '16:9', '9:16', '1:1', '4:5'].map(r => (<button key={r} onClick={() => setAspectRatio(r)} className={`px-3 py-2 text-xs font-medium rounded-lg border transition-all ${aspectRatio === r ? 'bg-[#222] border-white text-white' : 'border-[#333] text-[#888] hover:border-[#555]'}`}>{r.toUpperCase()}</button>))}</div></div><div className=\"space-y-4 pt-4 border-t border-[#222]\"><label className=\"text-xs font-bold text-[#666] uppercase tracking-wider\">Fill Mode</label><div className=\"flex bg-[#000] p-1 rounded-lg border border-[#222]\">{['fit', 'fill'].map(m => (<button key={m} onClick={() => setScaleMode(m)} className={`flex-1 py-1.5 text-xs font-medium rounded-md capitalize transition-all ${scaleMode === m ? 'bg-[#333] text-white' : 'text-[#666] hover:text-[#888]'}`}>{m}</button>))}</div></div><div className=\"space-y-4 pt-4 border-t border-[#222]\"><label className=\"text-xs font-bold text-[#666] uppercase tracking-wider\">Adjustments</label>{['exposure', 'contrast', 'saturation'].map(control => (<div key={control} className=\"space-y-1.5\"><div className=\"flex justify-between text-xs text-[#aaa]\"><span className=\"capitalize\">{control}</span><span>{grading[control]}</span></div><input type=\"range\" min=\"0\" max=\"200\" value={grading[control]} onChange={(e) => updateGrading(control, e.target.value)} className=\"w-full h-1 bg-[#333] rounded-lg accent-white appearance-none cursor-pointer hover:accent-gray-200\" /></div>))}</div></div>)}\n           {activeTool === 'media' && (<div className=\"space-y-4 animate-fade-in\"><div className={`border-2 border-dashed border-[#333] rounded-xl h-40 flex flex-col items-center justify-center transition-all cursor-pointer relative group ${isDragging ? 'bg-[#222] border-white' : 'bg-[#0a0a0a] hover:bg-[#1a1a1a] hover:border-[#555]'}`} onDragOver={handleDragOver} onDragLeave={handleDragLeave} onDrop={handleDrop}><input type=\"file\" accept=\"video/*\" onChange={handleUpload} className=\"absolute inset-0 opacity-0 cursor-pointer z-10\" /><div className=\"w-10 h-10 bg-[#222] rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform\"><Upload className=\"w-5 h-5 text-white\" /></div><span className=\"text-xs font-medium text-[#888]\">Click to Upload or Drag Video</span></div></div>)}\n           {activeTool === 'ai' && (<div className=\"space-y-4\"><div className=\"p-3 bg-gradient-to-br from-white/5 to-white/10 border border-white/10 rounded-xl\"><div className=\"flex items-center gap-2 mb-2\"><Bot className=\"w-4 h-4\" style={{color: accentColor}} /><span className=\"text-sm font-bold text-white\">AI Color Grade</span></div><input type=\"text\" placeholder=\"e.g. 1980s Retro Vibe\" className=\"w-full bg-[#111] border border-white/10 rounded px-3 py-2 text-xs mb-3 text-white outline-none\" value={aiPrompt} onChange={(e) => setAiPrompt(e.target.value)} /><button onClick={handleAIGrading} disabled={isAiGenerating} className=\"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white rounded text-xs font-bold flex items-center justify-center gap-2\">{isAiGenerating ? <Loader2 className=\"w-3 h-3 animate-spin\"/> : <Sparkles className=\"w-3 h-3\"/>} Generate Look</button></div><div className=\"p-3 bg-[#1a1a1a] border border-white/10 rounded-xl mt-4\"><div className=\"flex items-center justify-between mb-2\"><div className=\"flex items-center gap-2\"><Eraser className=\"w-4 h-4 text-pink-400\" /><span className=\"text-sm font-bold text-white\">BG Remover</span></div></div><button onClick={handleRemoveBg} disabled={isAiGenerating} className={`w-full py-2 rounded text-xs font-bold flex items-center justify-center gap-2 transition-all ${isBgRemoved ? 'bg-red-500 hover:bg-red-600' : 'bg-white text-black hover:bg-gray-200'}`}>{isAiGenerating ? <Loader2 className=\"w-3 h-3 animate-spin\"/> : isBgRemoved ? \"Restore Background\" : \"Remove Background (AI)\"}</button></div></div>)}\n           {activeTool === 'text' && (<div className=\"space-y-4\"><input type=\"text\" placeholder=\"Add Text Overlay...\" className=\"w-full bg-[#222] border border-[#333] rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 outline-none\" value={textOverlay} onChange={(e) => setTextOverlay(e.target.value)} /><p className=\"text-xs text-neutral-500\">Text will appear centered on the video.</p></div>)}\n        </div></div>\n         <div className=\"flex-1 bg-[#0a0a0a] flex flex-col relative\">\n            <div className=\"flex-1 flex items-center justify-center p-8 overflow-hidden relative bg-[radial-gradient(#1a1a1a_1px,transparent_1px)] [background-size:16px_16px]\">\n               {!videoFile && (<div className=\"text-center animate-fade-up\"><div className=\"w-16 h-16 bg-[#1a1a1a] rounded-2xl flex items-center justify-center mx-auto mb-4 border border-[#222]\"><Plus className=\"w-8 h-8 text-[#444]\" /></div><p className=\"text-[#666] text-sm\">No media added yet</p></div>)}\n               <video ref={videoRef} src={videoFile} className=\"absolute opacity-0 pointer-events-none\" onLoadedData={() => setTimeout(() => setIsPlaying(false), 100)} />\n               <canvas ref={canvasRef} className={`shadow-2xl transition-all duration-300 ${!videoFile ? 'opacity-0' : 'opacity-100'}`} style={{ maxHeight: 'calc(100vh - 350px)', maxWidth: '100%' }} />\n            </div>\n            <div className=\"h-[280px] bg-[#0e0e0e] border-t border-[#222] flex flex-col animate-slide-up\">\n               <div className=\"h-12 border-b border-[#222] flex items-center justify-between px-4 bg-[#111]\"><div className=\"flex items-center gap-4\"><button onClick={togglePlay} className=\"text-white hover:text-blue-400\"><Play className={`w-4 h-4 ${isPlaying ? 'fill-current' : ''}`} style={{ color: isPlaying ? accentColor : 'white' }} /></button><span className=\"text-xs font-mono text-neutral-400\">{new Date(currentTime * 1000).toISOString().substr(14, 5)} / {new Date(duration * 1000).toISOString().substr(14, 5)}</span></div><div className=\"flex items-center gap-2\"><button onClick={toggleMute} className=\"text-neutral-400 hover:text-white\">{isMuted || volume === 0 ? <VolumeX className=\"w-4 h-4\" /> : <Volume2 className=\"w-4 h-4\" />}</button><input type=\"range\" min=\"0\" max=\"1\" step=\"0.1\" value={volume} onChange={handleVolumeChange} className=\"w-20 h-1 bg-[#333] rounded-lg accent-white appearance-none cursor-pointer\" style={{ accentColor: accentColor }} /></div></div>\n               <div className=\"flex-1 p-4 overflow-y-auto custom-scrollbar relative\">\n                  <div className=\"flex justify-between text-[10px] text-[#444] font-mono mb-2 px-1 border-b border-[#222] pb-2\"><span>00:00</span><span>00:15</span><span>00:30</span><span>00:45</span><span>01:00</span></div>\n                  {/* Timeline with Cursor Drag */}\n                  <div className=\"relative h-full\" ref={timelineRef} onClick={handleTimelineClick} style={{ cursor: 'crosshair' }}>\n                      <div className=\"absolute top-0 bottom-0 w-[2px] bg-red-500 z-30 pointer-events-none transition-all duration-75\" style={{ left: `${(currentTime / (duration || 1)) * 100}%` }}><div className=\"w-3 h-3 bg-red-500 -ml-1.5 rotate-45 transform -mt-1.5 rounded-sm\"></div></div>\n                      {layers.map((layer) => (\n                          <div key={layer.id} className=\"mb-2\">\n                             <div className=\"flex items-center gap-2 mb-1\">\n                                {layer.type === 'video' ? <Video className=\"w-3 h-3 text-[#666]\" /> : <Music className=\"w-3 h-3 text-[#666]\" />}\n                                <span className=\"text-[10px] text-[#666] font-bold uppercase\">{layer.name}</span>\n                             </div>\n                             <div className={`h-${layer.type === 'audio' ? '10' : '16'} bg-[#161616] rounded-lg border border-[#2a2a2a] relative overflow-hidden`}>\n                                {layer.type === 'video' && videoFile && (\n                                   <div className=\"absolute inset-0 flex\">{[...Array(20)].map((_, i) => (<div key={i} className=\"flex-1 border-r border-[#222] bg-[#1a1a1a] opacity-50\"></div>))}<div className=\"absolute inset-0 bg-blue-500/10 border-l-4 border-blue-500\"></div></div>\n                                )}\n                                {!videoFile && <div className=\"w-full h-full flex items-center justify-center text-[10px] text-[#333]\">Empty Track</div>}\n                             </div>\n                          </div>\n                      ))}\n                      <button onClick={addLayer} className=\"w-full py-2 mt-2 border border-dashed border-[#333] rounded-lg text-xs text-[#555] hover:text-white flex items-center justify-center gap-2\"><Plus className=\"w-3 h-3\" /> Add Track</button>\n                  </div>\n               </div>\n            </div>\n         </div>\n      </div>\n    </div>\n  );\n};\n\nconst App = () => {\n  const [activeTab, setActiveTab] = useState('store'); \n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [cart, setCart] = useState([]);\n  const [isCartOpen, setIsCartOpen] = useState(false);\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n  const [activeCategory, setActiveCategory] = useState(\"All\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [accentColor, setAccentColor] = useState(\"#2563eb\");\n  const [user, setUser] = useState(null); \n  const [isSessionActive, setIsSessionActive] = useState(false); \n  const [showAdminLogin, setShowAdminLogin] = useState(false);\n  const [loginEmail, setLoginEmail] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n  const [modelsLoaded, setModelsLoaded] = useState(false);\n  const [isFaceVerifying, setIsFaceVerifying] = useState(false);\n  const [faceStatus, setFaceStatus] = useState(\"Loading AI Models...\");\n  const [showRegistration, setShowRegistration] = useState(false);\n  const videoRef = useRef(null);\n  const streamRef = useRef(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [uploadStatus, setUploadStatus] = useState(\"\");\n  const [isProcessingPayment, setIsProcessingPayment] = useState(false);\n  const [showPasswordChange, setShowPasswordChange] = useState(false);\n  const [newAdminPassword, setNewAdminPassword] = useState(\"\");\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editThumbnailFile, setEditThumbnailFile] = useState(null);\n  const [stats, setStats] = useState({ totalRevenue: 0, totalOrders: 0, recentSales: [], totalVisitors: 0 }); // âœ… Fixed Stats\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [purchasedItems, setPurchasedItems] = useState([]);\n  const [assetMode, setAssetMode] = useState('upload'); \n  const [externalAssetLink, setExternalAssetLink] = useState(\"\");\n  const [aiDescPrompt, setAiDescPrompt] = useState(\"\"); \n  const [isGeneratingDesc, setIsGeneratingDesc] = useState(false);\n  const [newProduct, setNewProduct] = useState({ title: \"\", category: \"Transitions\", price: \"\", image: \"purple\", description: \"\", productFile: null, previewFile: null, thumbnailFile: null });\n  const [authStep, setAuthStep] = useState('login'); \n  const [introFinished, setIntroFinished] = useState(false); // New State for Intro\n\n  // --- VISITOR TRACKING LOGIC ---\n  useEffect(() => {\n    const incrementVisitor = async () => {\n        try {\n            const statsRef = doc(db, \"site_stats\", \"general\");\n            const docSnap = await getDoc(statsRef);\n            if (docSnap.exists()) {\n                await updateDoc(statsRef, { visitors: increment(1) });\n            } else {\n                await setDoc(statsRef, { visitors: 1, createdAt: serverTimestamp() });\n            }\n        } catch (err) { \n            // Silent catch to prevent crashing if rules deny access\n            console.warn(\"Visitor tracking failed (likely permission issue):\", err); \n        }\n    };\n    incrementVisitor();\n  }, []);\n\n  const categories = [\"All\", ...new Set(products.map(p => p.category))];\n  const filteredProducts = products.filter(p => (activeCategory === \"All\" || p.category === activeCategory) && p.title.toLowerCase().includes(searchTerm.toLowerCase()));\n  const cartTotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);\n  const getGradient = (c) => ({ purple: \"from-purple-600 to-blue-600\", orange: \"from-orange-500 to-red-600\", blue: \"from-blue-500 to-cyan-400\", green: \"from-emerald-500 to-teal-600\", red: \"from-red-600 to-rose-500\", yellow: \"from-yellow-400 to-orange-500\" }[c] || \"from-gray-700 to-gray-900\");\n\n  // FIX: Using Fetch instead of XMLHttpRequest for reliable uploads\n  const uploadToCloudinary = async (file, resourceType) => {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"upload_preset\", CLOUDINARY_UPLOAD_PRESET);\n    \n    // For raw files (assets), we want them to be downloadable and secure\n    if (resourceType === 'raw') {\n        const uniqueId = `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n        const safeName = file.name.replace(/[^a-zA-Z0-9]/g, \"_\");\n        formData.append(\"public_id\", `secure_assets/${uniqueId}_${safeName}`);\n    }\n\n    const url = `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/${resourceType}/upload`;\n    \n    try {\n        const response = await fetch(url, {\n            method: 'POST',\n            body: formData\n        });\n\n        if (!response.ok) throw new Error(\"Upload Failed\");\n        const data = await response.json();\n        return data.secure_url;\n    } catch (error) {\n        console.error(\"Cloudinary Error:\", error);\n        throw error;\n    }\n  };\n\n  useEffect(() => {\n    const loadFaceApi = async () => {\n      if (!window.faceapi) {\n        const script = document.createElement('script');\n        script.src = 'https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js';\n        script.async = true;\n        script.onload = () => loadModels();\n        document.body.appendChild(script);\n      } else loadModels();\n    };\n    const loadModels = async () => {\n      const MODEL_URL = 'https://justadudewhohacks.github.io/face-api.js/models';\n      try { await Promise.all([window.faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL), window.faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL), window.faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL), window.faceapi.nets.ssdMobilenetv1.loadFromUri(MODEL_URL)]); setModelsLoaded(true); } catch (err) {}\n    };\n    loadFaceApi();\n  }, []);\n\n  const fetchProducts = async () => {\n    try { const q = query(collection(db, \"products\"), orderBy(\"createdAt\", \"desc\")); const s = await getDocs(q); setProducts(s.docs.map(doc => ({ id: doc.id, ...doc.data() }))); } catch (e) {} finally { setLoading(false); }\n  };\n  \n  const fetchStats = async () => {\n    if (!isSessionActive) return;\n    try {\n      const q = query(collection(db, \"orders\"), orderBy(\"createdAt\", \"desc\"));\n      const querySnapshot = await getDocs(q);\n      const orders = querySnapshot.docs.map(doc => doc.data());\n      const totalRev = orders.reduce((sum, order) => sum + (order.amount || 0), 0);\n      \n      const visitorDoc = await getDoc(doc(db, \"site_stats\", \"general\"));\n      const totalVis = visitorDoc.exists() ? visitorDoc.data().visitors : 0;\n\n      setStats({ totalRevenue: totalRev, totalOrders: orders.length, recentSales: orders.slice(0, 5), totalVisitors: totalVis });\n    } catch (error) { console.error(\"Error fetching stats:\", error); }\n  };\n\n  useEffect(() => { fetchProducts(); }, [user]);\n  useEffect(() => { fetchStats(); }, [isSessionActive]);\n  useEffect(() => { onAuthStateChanged(auth, (u) => { setUser(u); if(!u) setIsSessionActive(false); }); }, []);\n\n  const startCamera = async () => { \n      try { \n          const s = await navigator.mediaDevices.getUserMedia({ video: {} }); \n          streamRef.current = s; \n          if(videoRef.current) videoRef.current.srcObject = s; \n          return s; \n      } catch(e) { \n          console.error(\"Camera Error:\", e);\n          return null; \n      } \n  };\n  \n  const stopCameraStream = () => { \n      if(streamRef.current) { \n          streamRef.current.getTracks().forEach(t => t.stop()); \n          streamRef.current = null; \n      } \n      if(videoRef.current) videoRef.current.srcObject = null; \n  };\n  \n  const handleRegisterFace = async () => {\n      // FIX: Ensure faceapi is available before using\n      if (!window.faceapi || !videoRef.current || !modelsLoaded || !user) return;\n      \n      setFaceStatus(\"Scanning Face...\");\n      try {\n          const detections = await window.faceapi.detectSingleFace(videoRef.current, new window.faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceDescriptor();\n          if (detections) {\n              const descriptor = Array.from(detections.descriptor);\n              await setDoc(doc(db, \"face_descriptors\", user.uid), { descriptor });\n              alert(\"Face ID Registered Successfully!\");\n              setIsFaceVerifying(false);\n              stopCameraStream(); // Manually stop after success\n          } else {\n              setFaceStatus(\"No face detected. Try again.\");\n          }\n      } catch (error) {\n          console.error(error);\n          setFaceStatus(\"Error scanning face.\");\n      }\n  };\n\n  const handleVerifyFace = async () => {\n      // FIX: Ensure faceapi is available\n      if (!window.faceapi || !videoRef.current || !modelsLoaded || !user) return;\n      \n      setFaceStatus(\"Verifying Identity...\");\n      try {\n          const detections = await window.faceapi.detectSingleFace(videoRef.current, new window.faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceDescriptor();\n          if (detections) {\n              const docRef = doc(db, \"face_descriptors\", user.uid);\n              const docSnap = await getDoc(docRef);\n              if (docSnap.exists()) {\n                  const savedDescriptor = new Float32Array(docSnap.data().descriptor);\n                  const distance = window.faceapi.euclideanDistance(detections.descriptor, savedDescriptor);\n                  if (distance < 0.6) {\n                      setIsSessionActive(true);\n                      setIsFaceVerifying(false);\n                      setFaceStatus(\"Verified!\");\n                  } else {\n                      setFaceStatus(\"Face mismatch. Access Denied.\");\n                  }\n              } else {\n                  setFaceStatus(\"No Face ID found. Please register first.\");\n                  setAuthStep('register-face');\n              }\n          } else {\n              setFaceStatus(\"No face detected.\");\n          }\n      } catch (error) {\n          console.error(error);\n          setFaceStatus(\"Error during verification.\");\n      }\n  };\n\n  const handleLogin = async (e) => { \n      e.preventDefault(); \n      try { \n          await signInWithEmailAndPassword(auth, loginEmail, loginPassword); \n          setShowAdminLogin(false); \n          setIsFaceVerifying(true);\n          // Check if face is registered\n          if (auth.currentUser) {\n            const faceDoc = await getDoc(doc(db, \"face_descriptors\", auth.currentUser.uid));\n            if (!faceDoc.exists()) {\n               setAuthStep('register-face');\n            } else {\n               setAuthStep('verify-face');\n            }\n          }\n      } catch(e) { \n          console.error(e);\n          alert(\"Invalid Credentials or User Not Found\"); \n      } \n  };\n\n  // FIX: Added cleanup function to stop camera when modal closes\n  useEffect(() => { \n      if(isFaceVerifying && modelsLoaded) { \n          startCamera(); \n      }\n      return () => {\n          stopCameraStream(); // Cleanup to prevent memory leaks/LED staying on\n      };\n  }, [isFaceVerifying, modelsLoaded]);\n  \n  const handlePayment = async () => {\n      if (cart.length === 0) return;\n      setIsProcessingPayment(true);\n      const res = await loadRazorpayScript();\n      if (!res) { alert(\"Razorpay SDK failed to load.\"); setIsProcessingPayment(false); return; }\n\n      const options = {\n          key: RAZORPAY_KEY_ID,\n          amount: cartTotal * 100, // Amount in paise\n          currency: \"INR\",\n          name: \"Edit.Flow Store\",\n          description: \"Digital Asset Purchase\",\n          image: \"https://via.placeholder.com/150\",\n          handler: async function (response) {\n              alert(\"Payment Successful! Payment ID: \" + response.razorpay_payment_id);\n              \n              // Save Order\n              await addDoc(collection(db, \"orders\"), {\n                  items: cart,\n                  amount: cartTotal,\n                  paymentId: response.razorpay_payment_id,\n                  createdAt: serverTimestamp(),\n                  status: 'paid'\n              });\n\n              setPurchasedItems([...purchasedItems, ...cart]);\n              setCart([]);\n              setIsCartOpen(false);\n          },\n          prefill: {\n              name: \"User\",\n              email: \"user@example.com\",\n              contact: \"9999999999\"\n          },\n          theme: { color: accentColor }\n      };\n      \n      const paymentObject = new window.Razorpay(options);\n      \n      // FIX: Handle Razorpay failure gracefully\n      paymentObject.on('payment.failed', function (response){\n          alert(\"Payment Failed: \" + response.error.description);\n          setIsProcessingPayment(false);\n      });\n      \n      paymentObject.open();\n      setIsProcessingPayment(false);\n  };\n\n  const addToCart = (p) => { setCart(prev => { const ex = prev.find(i => i.id === p.id); return ex ? prev.map(i => i.id === p.id ? { ...i, qty: i.qty + 1 } : i) : [...prev, { ...p, qty: 1 }]; }); setIsCartOpen(true); };\n  const updateQuantity = (id, d) => setCart(prev => prev.map(i => i.id === id ? { ...i, qty: Math.max(1, i.qty + d) } : i));\n  const removeFromCart = (id) => setCart(prev => prev.filter(i => i.id !== id));\n  const handleLogout = async () => { await signOut(auth); setUser(null); setIsSessionActive(false); setAuthStep('login'); stopCameraStream(); };\n  const handleFileChange = (e, f) => { const file = e.target.files[0]; if(file) setNewProduct({ ...newProduct, [f]: file }); };\n  const handleAIAction = (data) => { if (data.action === 'theme') { const colors = { \"red\": \"#ef4444\", \"blue\": \"#2563eb\", \"green\": \"#22c55e\", \"purple\": \"#a855f7\", \"orange\": \"#f97316\", \"pink\": \"#ec4899\", \"cyan\": \"#06b6d4\" }; const hex = colors[data.color.toLowerCase()] || data.color; setAccentColor(hex); } else if (data.action === 'navigate') { if (data.page && data.page.toLowerCase().includes('studio')) setActiveTab('studio'); if (data.page && data.page.toLowerCase().includes('store')) setActiveTab('store'); } };\n  const handleGenerateDescription = async () => { if (!newProduct.title) return alert(\"Enter a title first!\"); setIsGeneratingDesc(true); const prompt = `Write a short, punchy, and sales-oriented description for a digital asset named \"${newProduct.title}\" in the category \"${newProduct.category}\". Keep it under 2 sentences. Use emojis.`; try { const desc = await generateAIContent(prompt); setNewProduct(prev => ({ ...prev, description: desc })); } catch (err) { alert(\"AI Generation Failed.\"); } finally { setIsGeneratingDesc(false); } };\n  const handleAddProduct = async (e) => { e.preventDefault(); if (!newProduct.title || !newProduct.price) return alert(\"Missing fields.\"); if (assetMode === 'link' && !externalAssetLink) return alert(\"Please paste the external link.\"); if (assetMode === 'upload' && !newProduct.productFile) return alert(\"Please select a file to upload.\"); setIsUploading(true); setUploadProgress(0); setUploadStatus(\"Starting...\"); try { let previewUrl = null; let productFileUrl = null; let customThumbnailUrl = null; if (newProduct.previewFile) { setUploadStatus(\"Uploading Video...\"); setUploadProgress(0); previewUrl = await uploadToCloudinary(newProduct.previewFile, \"video\"); } if (newProduct.thumbnailFile) { setUploadStatus(\"Uploading Thumbnail...\"); customThumbnailUrl = await uploadToCloudinary(newProduct.thumbnailFile, \"image\"); } if (assetMode === 'upload' && newProduct.productFile) { setUploadStatus(\"Uploading Asset...\"); setUploadProgress(0); productFileUrl = await uploadToCloudinary(newProduct.productFile, \"raw\"); } else if (assetMode === 'link') { productFileUrl = externalAssetLink; } setUploadStatus(\"Saving...\"); await addDoc(collection(db, \"products\"), { title: newProduct.title, price: parseFloat(newProduct.price), category: newProduct.category, image: newProduct.image, description: newProduct.description, rating: 5, videoUrl: previewUrl, fileUrl: productFileUrl, customThumbnailUrl: customThumbnailUrl, fileName: assetMode === 'upload' ? (newProduct.productFile?.name || \"file\") : \"External Link\", createdAt: new Date().toISOString() }); alert(\"Product Uploaded Successfully!\"); setNewProduct({ title: \"\", category: \"Transitions\", price: \"\", image: \"purple\", description: \"\", productFile: null, previewFile: null, thumbnailFile: null }); setExternalAssetLink(\"\"); fetchProducts(); } catch (error) { console.error(error); alert(\"Upload Error: \" + error.message); } finally { setIsUploading(false); setUploadStatus(\"\"); } };\n  const handleUpdateProduct = async (e) => { e.preventDefault(); if (!editingProduct) return; setIsUploading(true); setUploadStatus(\"Updating...\"); try { let updatedThumbnailUrl = editingProduct.customThumbnailUrl || null; if (editThumbnailFile) { setUploadStatus(\"Uploading New Thumbnail...\"); updatedThumbnailUrl = await uploadToCloudinary(editThumbnailFile, \"image\"); } const productRef = doc(db, \"products\", editingProduct.id); await updateDoc(productRef, { title: editingProduct.title, price: parseFloat(editingProduct.price), category: editingProduct.category, description: editingProduct.description, image: editingProduct.image, customThumbnailUrl: updatedThumbnailUrl }); alert(\"Product Updated!\"); setShowEditModal(false); setEditingProduct(null); setEditThumbnailFile(null); fetchProducts(); } catch (error) { alert(\"Update Failed: \" + error.message); } finally { setIsUploading(false); setUploadStatus(\"\"); } };\n  const openEditModal = (p) => { setEditingProduct({...p}); setEditThumbnailFile(null); setShowEditModal(true); };\n  const handleDeleteProduct = async (id) => { if(window.confirm(\"Delete?\")) try { await deleteDoc(doc(db, \"products\", id)); setProducts(products.filter(p => p.id !== id)); } catch(e) {} };\n\n  const ProductCard = ({ product }) => {\n    const vRef = useRef(null);\n    const [isHovered, setIsHovered] = useState(false);\n    const randomOffset = useRef(Math.floor(Math.random() * 6) + 1); \n    const getThumbnailUrl = (url) => { if (!url) return null; if (url.includes(\"cloudinary.com\")) { let thumbUrl = url.replace(/\\.(mp4|mov|webm)$/i, \".jpg\"); if (!thumbUrl.includes(\"/upload/so_\")) { thumbUrl = thumbUrl.replace(\"/upload/\", `/upload/so_${randomOffset.current}.0/`); } return thumbUrl; } return null; };\n    const posterUrl = product.customThumbnailUrl || getThumbnailUrl(product.videoUrl);\n\n    // FIX: Better play/pause logic to avoid \"interrupted\" errors\n    const handleMouseEnter = () => {\n        setIsHovered(true);\n        if (vRef.current) {\n            const playPromise = vRef.current.play();\n            if (playPromise !== undefined) {\n                playPromise.catch(error => {\n                    // Silently catch error if play was interrupted (e.g. mouse left too fast)\n                });\n            }\n        }\n    };\n\n    const handleMouseLeave = () => {\n        setIsHovered(false);\n        if (vRef.current) {\n            vRef.current.pause();\n            vRef.current.currentTime = 0; \n        }\n    };\n\n    return (\n      <div \n        className=\"group flex flex-col bg-neutral-900/50 border border-white/5 rounded-2xl overflow-hidden transition-all duration-300 relative hover:shadow-[0_0_30px_rgba(37,99,235,0.15)]\"\n        style={{ \n            borderColor: isHovered ? accentColor : 'rgba(255,255,255,0.05)',\n            transform: isHovered ? 'scale(1.05)' : 'scale(1)',\n            zIndex: isHovered ? 50 : 1\n        }}\n        onMouseEnter={handleMouseEnter} \n        onMouseLeave={handleMouseLeave}\n      >\n        {isSessionActive && <div className=\"absolute top-4 right-4 z-50 flex gap-2\"><button onClick={(e)=>{e.stopPropagation(); openEditModal(product)}} className=\"p-2 bg-blue-600 text-white rounded-full\"><Edit className=\"w-4 h-4\"/></button><button onClick={(e)=>{e.stopPropagation(); handleDeleteProduct(product.id)}} className=\"p-2 bg-red-600 text-white rounded-full\"><Trash2 className=\"w-4 h-4\"/></button></div>}\n        <div className=\"relative aspect-[16/10] bg-black\">\n          {product.videoUrl ? <><video ref={vRef} src={product.videoUrl} muted loop playsInline className=\"absolute inset-0 w-full h-full object-cover z-10\" />{posterUrl && <img src={posterUrl} className={`absolute inset-0 w-full h-full object-cover z-20 transition-opacity duration-300 ${isHovered ? 'opacity-0' : 'opacity-100'}`} onError={(e) => e.target.style.display = 'none'} />}</> : <div className={`absolute inset-0 bg-gradient-to-br ${getGradient(product.image)} opacity-80`} />}\n          {!product.videoUrl && <div className=\"absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors duration-300 z-20 pointer-events-none\" />}\n           <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 z-30 transition-opacity duration-300\"><button onClick={(e) => {e.stopPropagation(); addToCart(product)}} className=\"text-white px-6 py-2 rounded-full font-bold flex items-center gap-2\" style={{ backgroundColor: accentColor }}><ShoppingBag className=\"w-4 h-4\"/> Add</button></div>\n        </div>\n        <div className=\"p-5\"><h3 className=\"font-bold text-white\">{product.title}</h3><p className=\"text-sm text-neutral-400 line-clamp-2\">{product.description}</p><div className=\"mt-auto pt-4 flex justify-between\"><span className=\"text-xl font-bold text-white\">â‚¹{product.price.toFixed(2)}</span></div></div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-neutral-950 text-white font-sans selection:bg-blue-500 selection:text-white relative\">\n      <style>{`\n        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }\n        @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }\n        @keyframes scaleIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }\n        .animate-fade-up { animation: fadeInUp 0.6s ease-out forwards; }\n        .animate-slide-right { animation: slideInRight 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }\n        .animate-scale-in { animation: scaleIn 0.3s ease-out forwards; }\n        .animate-fade-in { animation: fadeInUp 0.4s ease-out forwards; }\n        .animate-slide-up { animation: fadeInUp 0.5s ease-out forwards; }\n      `}</style>\n      \n      {/* --- SHOW INTRO OR MAIN APP --- */}\n      {!introFinished ? (\n          <IntroOverlay onComplete={() => setIntroFinished(true)} />\n      ) : (\n        <div className=\"animate-fade-in\">\n            <div className=\"fixed inset-0 z-0 pointer-events-none\"><div className=\"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] rounded-full opacity-10 blur-[120px]\" style={{ backgroundColor: accentColor }} /><div className=\"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] rounded-full opacity-10 blur-[120px]\" style={{ backgroundColor: accentColor === '#2563eb' ? '#9333ea' : accentColor }} /></div>\n            \n            {activeTab === 'store' ? (\n              <>\n                  <nav className=\"sticky top-0 z-40 w-full backdrop-blur-xl bg-neutral-950/70 border-b border-white/5 relative z-20\">\n                  <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                      <div className=\"flex items-center justify-between h-16\">\n                      <div className=\"flex items-center gap-2 cursor-pointer\" onClick={() => setActiveTab('store')}><div className=\"w-8 h-8 rounded-lg flex items-center justify-center\" style={{ backgroundColor: accentColor }}><Play className=\"w-4 h-4 text-white fill-white\" /></div><span className=\"text-xl font-bold tracking-tighter bg-clip-text text-transparent bg-gradient-to-r from-white to-neutral-400\">EDIT.FLOW</span></div>\n                      \n                      {/* MAIN NAVIGATION SWITCHER */}\n                      <div className=\"hidden md:flex items-center space-x-1 bg-white/5 p-1 rounded-full border border-white/10\">\n                          <button onClick={() => setActiveTab('store')} className={`px-6 py-1.5 rounded-full text-sm font-medium transition-all ${activeTab === 'store' ? 'bg-white text-black shadow-lg' : 'text-neutral-400 hover:text-white'}`} style={{ backgroundColor: activeTab === 'store' ? 'white' : 'transparent' }}>Store</button>\n                          <button onClick={() => setActiveTab('studio')} className={`px-6 py-1.5 rounded-full text-sm font-medium transition-all flex items-center gap-2 ${activeTab === 'studio' ? 'bg-blue-600 text-white shadow-lg' : 'text-neutral-400 hover:text-white'}`} style={{ backgroundColor: activeTab === 'studio' ? accentColor : 'transparent' }}><Wand2 className=\"w-3 h-3\" /> Studio</button>\n                      </div>\n\n                      <div className=\"flex items-center gap-4\">{isSessionActive && <span className=\"hidden md:inline-flex items-center gap-1 text-green-500 text-xs font-bold\"><ShieldCheck className=\"w-3 h-3\" /> Admin</span>}<button onClick={() => setIsCartOpen(true)} className=\"relative p-2 hover:bg-white/10 rounded-full\"><ShoppingBag className=\"w-5 h-5 text-neutral-300\" />{cart.length > 0 && <span className=\"absolute -top-1 -right-1 w-4 h-4 text-[10px] font-bold flex items-center justify-center rounded-full text-white\" style={{ backgroundColor: accentColor }}>{cart.reduce((a,b)=>a+b.qty,0)}</span>}</button></div>\n                      </div>\n                  </div>\n                  </nav>\n                  {!isSessionActive && <section className=\"pt-20 pb-16 text-center relative overflow-hidden animate-fade-up z-10\"><h1 className=\"text-5xl font-bold mb-8\">Create Content That<br/><span className=\"text-transparent bg-clip-text\" style={{ backgroundImage: `linear-gradient(to right, white, ${accentColor})` }}>Stops The Scroll.</span></h1></section>}\n                  <main className=\"max-w-7xl mx-auto px-4 py-20 relative z-10\">\n                    {isSessionActive && (\n                      <section className=\"bg-neutral-900/50 backdrop-blur-md border-b border-white/10 border-t-4 py-8 px-4 mb-10 rounded-xl animate-scale-in relative z-20\" style={{ borderTopColor: accentColor }}>\n                        <div className=\"flex justify-between items-center mb-6\"><h2 className=\"text-2xl font-bold flex items-center gap-2\"><Upload className=\"w-6 h-6\" style={{ color: accentColor }} /> Admin</h2><button onClick={handleLogout} className=\"text-sm text-red-400 flex items-center gap-1\"><LogOut className=\"w-4 h-4\" /> Logout</button></div>\n                        \n                        {/* LIVE TRAFFIC STATS (Admin Only) */}\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n                            <div className=\"bg-black/40 p-4 rounded-xl border border-white/10 flex items-center gap-4\"><div className=\"p-3 bg-green-500/20 rounded-full\"><DollarSign className=\"w-6 h-6 text-green-500\" /></div><div><p className=\"text-xs text-neutral-400\">Total Revenue</p><h3 className=\"text-2xl font-bold text-white\">â‚¹{stats.totalRevenue.toFixed(2)}</h3></div></div>\n                            <div className=\"bg-black/40 p-4 rounded-xl border border-white/10 flex items-center gap-4\"><div className=\"p-3 bg-blue-500/20 rounded-full\"><Package className=\"w-6 h-6 text-blue-500\" /></div><div><p className=\"text-xs text-neutral-400\">Total Orders</p><h3 className=\"text-2xl font-bold text-white\">{stats.totalOrders}</h3></div></div>\n                            <div className=\"bg-black/40 p-4 rounded-xl border border-white/10 flex items-center gap-4\"><div className=\"p-3 bg-purple-500/20 rounded-full\"><Users className=\"w-6 h-6 text-purple-500\" /></div><div><p className=\"text-xs text-neutral-400\">Total Visitors</p><h3 className=\"text-2xl font-bold text-white\">{stats.totalVisitors}</h3></div></div>\n                        </div>\n\n                        <button onClick={() => document.getElementById('addProductForm').classList.toggle('hidden')} className=\"w-full py-3 bg-white/5 border border-white/10 rounded-lg text-neutral-400 hover:bg-white/10 transition-colors\">Toggle Upload Form</button>\n                        <div id=\"addProductForm\" className=\"hidden mt-4\">\n                          <form onSubmit={handleAddProduct} className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                              <div className=\"md:col-span-2 flex gap-4 p-2 bg-neutral-800 rounded-lg w-fit\">\n                                <button type=\"button\" onClick={() => setAssetMode('upload')} className={`px-4 py-2 rounded-md text-sm font-bold transition-colors ${assetMode === 'upload' ? 'bg-green-600 text-white' : 'text-neutral-400 hover:text-white'}`}>Upload File</button>\n                                <button type=\"button\" onClick={() => setAssetMode('link')} className={`px-4 py-2 rounded-md text-sm font-bold transition-colors ${assetMode === 'link' ? 'bg-blue-600 text-white' : 'text-neutral-400 hover:text-white'}`}>Paste External Link</button>\n                              </div>\n                              <div className=\"md:col-span-1\"><label className=\"block text-xs font-medium text-neutral-400 mb-2\">Video Preview</label><input type=\"file\" accept=\"video/*\" onChange={(e) => handleFileChange(e, 'previewFile')} className=\"w-full text-sm text-neutral-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:bg-blue-600 file:text-white\" /></div>\n                              <div className=\"md:col-span-1\"><label className=\"block text-xs font-medium text-neutral-400 mb-2\">Thumbnail (Optional)</label><input type=\"file\" accept=\"image/*\" onChange={(e) => handleFileChange(e, 'thumbnailFile')} className=\"w-full text-sm text-neutral-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:bg-purple-600 file:text-white\" /></div>\n                              <div className=\"md:col-span-1\"><label className=\"block text-xs font-medium text-neutral-400 mb-2\">Main Asset</label>{assetMode === 'upload' ? <input type=\"file\" onChange={(e) => handleFileChange(e, 'productFile')} className=\"w-full text-sm text-neutral-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:bg-green-600 file:text-white\" /> : <input type=\"url\" placeholder=\"Link...\" className=\"w-full px-4 py-2 bg-neutral-800 rounded-lg text-white\" value={externalAssetLink} onChange={(e) => setExternalAssetLink(e.target.value)} />}</div>\n                              <div className=\"md:col-span-2\"><input type=\"text\" required placeholder=\"Title\" className=\"w-full px-4 py-3 bg-neutral-800 rounded-lg border border-white/10 text-white\" value={newProduct.title} onChange={(e) => setNewProduct({...newProduct, title: e.target.value})} /></div>\n                              <div><input type=\"number\" required placeholder=\"Price\" className=\"w-full px-4 py-3 bg-neutral-800 rounded-lg border border-white/10 text-white\" value={newProduct.price} onChange={(e) => setNewProduct({...newProduct, price: e.target.value})} /></div>\n                              <div><select className=\"w-full px-4 py-3 bg-neutral-800 rounded-lg border border-white/10 text-white\" value={newProduct.category} onChange={(e) => setNewProduct({...newProduct, category: e.target.value})}><option>Transitions</option><option>Project Files</option><option>Color</option><option>Titles</option><option>Overlays</option></select></div>\n                              <div className=\"md:col-span-2 relative\"><label className=\"block text-xs font-medium text-neutral-400 mb-1\">Description</label><textarea className=\"w-full px-4 py-3 bg-neutral-800 rounded-lg border border-white/10 text-white pr-24\" placeholder=\"Desc...\" value={newProduct.description} onChange={(e) => setNewProduct({...newProduct, description: e.target.value})} /><button type=\"button\" onClick={handleGenerateDescription} disabled={isGeneratingDesc} className=\"absolute top-8 right-2 px-3 py-1.5 text-white text-xs font-bold rounded-md hover:opacity-90 flex items-center gap-1\" style={{ backgroundColor: accentColor }}>{isGeneratingDesc ? <Loader2 className=\"w-3 h-3 animate-spin\"/> : <><Sparkles className=\"w-3 h-3\"/> AI Write</>}</button></div>\n                              <div className=\"md:col-span-2\"><button type=\"submit\" disabled={isUploading} className=\"w-full py-4 text-white font-bold rounded-xl\" style={{ backgroundColor: accentColor }}>{isUploading ? \"Uploading...\" : \"Save Product\"}</button></div>\n                          </form>\n                        </div>\n                      </section>\n                    )}\n                    {loading ? <div className=\"flex justify-center\"><Loader2 className=\"w-10 h-10 animate-spin\" style={{ color: accentColor }} /></div> : <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 animate-fade-up delay-200\">{filteredProducts.map(p => <ProductCard key={p.id} product={p} />)}</div>}\n                  </main>\n                </>\n              ) : (\n                isSessionActive ? (\n                  <VideoEditor onGoBack={() => setActiveTab('store')} accentColor={accentColor} />\n                ) : (\n                  <ComingSoonPage onGoBack={() => setActiveTab('store')} />\n                )\n              )}\n              \n              {isSessionActive && <AIAssistant onAction={handleAIAction} activeTab={activeTab} storeStats={stats} />}\n              \n              {isCartOpen && (\n                <div className=\"fixed inset-0 z-50\">\n                    {/* Backdrop */}\n                    <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity\" onClick={() => setIsCartOpen(false)}></div>\n                    \n                    {/* Fixed Side Drawer - 450px wide, full height, right aligned */}\n                    <div className=\"fixed inset-y-0 right-0 w-full sm:w-[450px] h-full bg-[#0F0F0F] border-l border-white/10 z-50 flex flex-col shadow-2xl animate-slide-right\">\n                        {/* Cart Header */}\n                        <div className=\"flex justify-between items-center p-6 border-b border-white/5 bg-[#141414]\">\n                            <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\n                                <ShoppingBag className=\"w-5 h-5\" /> Your Cart\n                            </h2>\n                            <button onClick={() => setIsCartOpen(false)} className=\"p-2 text-neutral-400 hover:text-white hover:bg-white/10 rounded-full transition-colors\">\n                                <X className=\"w-6 h-6\"/>\n                            </button>\n                        </div>\n\n                        {/* Cart Items */}\n                        <div className=\"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar\">\n                            {cart.length === 0 ? (\n                                <div className=\"h-full flex flex-col items-center justify-center text-neutral-500 space-y-4\">\n                                    <div className=\"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center\">\n                                        <ShoppingBag className=\"w-8 h-8 opacity-40\" />\n                                    </div>\n                                    <p className=\"text-sm font-medium\">Your cart is empty.</p>\n                                </div>\n                            ) : (\n                                cart.map(item => (\n                                    <div key={item.id} className=\"flex gap-4 bg-[#1A1A1A] p-4 rounded-xl border border-white/5 hover:border-white/10 transition-all group\">\n                                        {/* Item Details */}\n                                        <div className=\"flex-1 flex flex-col justify-between gap-3\">\n                                            <div>\n                                                <h4 className=\"font-bold text-base text-white line-clamp-1\">{item.title}</h4>\n                                                <p className=\"text-xs text-neutral-500 mt-1\">{item.category}</p>\n                                            </div>\n                                            \n                                            <div className=\"flex items-center justify-between\">\n                                                <div className=\"flex items-center gap-3 bg-black rounded-lg p-1.5 border border-white/5\">\n                                                    <button onClick={() => updateQuantity(item.id, -1)} className=\"w-7 h-7 flex items-center justify-center hover:bg-white/10 rounded text-neutral-400 hover:text-white transition-colors disabled:opacity-30\" disabled={item.qty <= 1}>\n                                                        <Minus className=\"w-4 h-4\" />\n                                                    </button>\n                                                    <span className=\"text-sm font-bold text-white w-6 text-center\">{item.qty}</span>\n                                                    <button onClick={() => updateQuantity(item.id, 1)} className=\"w-7 h-7 flex items-center justify-center hover:bg-white/10 rounded text-neutral-400 hover:text-white transition-colors\">\n                                                        <Plus className=\"w-4 h-4\" />\n                                                    </button>\n                                                </div>\n                                                <span className=\"font-bold text-lg text-white\">â‚¹{(item.price * item.qty).toFixed(2)}</span>\n                                            </div>\n                                        </div>\n                                        \n                                        {/* Remove Button */}\n                                        <button onClick={() => removeFromCart(item.id)} className=\"text-neutral-600 hover:text-red-400 p-2 self-start transition-colors\">\n                                            <Trash2 className=\"w-5 h-5\" />\n                                        </button>\n                                    </div>\n                                ))\n                            )}\n                        </div>\n\n                        {/* Footer / Checkout */}\n                        {cart.length > 0 && (\n                            <div className=\"p-6 bg-[#141414] border-t border-white/5 space-y-5\">\n                                <div className=\"space-y-3\">\n                                    <div className=\"flex justify-between items-center text-neutral-400 text-sm\">\n                                        <span>Subtotal</span>\n                                        <span>â‚¹{cartTotal.toFixed(2)}</span>\n                                    </div>\n                                    <div className=\"flex justify-between items-center text-white text-base font-bold\">\n                                        <span>Total</span>\n                                        <span className=\"text-2xl\">â‚¹{cartTotal.toFixed(2)}</span>\n                                    </div>\n                                </div>\n                                <button \n                                    onClick={handlePayment} \n                                    disabled={isProcessingPayment} \n                                    className=\"w-full py-4 text-white text-base font-bold rounded-xl flex items-center justify-center gap-3 hover:brightness-110 active:scale-[0.98] transition-all shadow-lg\" \n                                    style={{ backgroundColor: accentColor }}\n                                >\n                                    {isProcessingPayment ? <Loader2 className=\"w-5 h-5 animate-spin\"/> : (\n                                        <>\n                                            <span>Proceed to Checkout</span>\n                                            <ArrowRight className=\"w-5 h-5\" />\n                                        </>\n                                    )}\n                                </button>\n                            </div>\n                        )}\n                    </div>\n                </div>\n              )}\n\n              {showAdminLogin && !isSessionActive && (<div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center\"><div className=\"bg-neutral-900 p-8 rounded-2xl w-full max-w-sm animate-scale-in\"><h2 className=\"text-xl font-bold mb-4\">Admin Login</h2><form onSubmit={handleLogin} className=\"space-y-4\"><input type=\"email\" value={loginEmail} onChange={e=>setLoginEmail(e.target.value)} className=\"w-full p-2 bg-black/50 text-white border border-white/10 rounded\" placeholder=\"Email\"/><input type=\"password\" value={loginPassword} onChange={e=>setLoginPassword(e.target.value)} className=\"w-full p-2 bg-black/50 text-white border border-white/10 rounded\" placeholder=\"Pass\"/><button type=\"submit\" className=\"w-full py-2 text-white rounded\" style={{ backgroundColor: accentColor }}>Login</button></form><button onClick={()=>setShowAdminLogin(false)} className=\"mt-4 text-sm text-neutral-500\">Cancel</button></div></div>)}\n              \n              {/* EDIT PRODUCT MODAL (Newly Added) */}\n              {showEditModal && editingProduct && (\n                <div className=\"fixed inset-0 bg-black/80 z-[60] flex items-center justify-center p-4\">\n                    <div className=\"bg-neutral-900 p-6 rounded-2xl w-full max-w-lg border border-white/10 animate-scale-in max-h-[90vh] overflow-y-auto\">\n                        <div className=\"flex justify-between items-center mb-6\">\n                            <h2 className=\"text-xl font-bold\">Edit Product</h2>\n                            <button onClick={() => setShowEditModal(false)}><X className=\"w-5 h-5\"/></button>\n                        </div>\n                        <form onSubmit={handleUpdateProduct} className=\"space-y-4\">\n                            <div>\n                                <label className=\"block text-xs font-medium text-neutral-400 mb-1\">Title</label>\n                                <input type=\"text\" className=\"w-full p-3 bg-black/50 border border-white/10 rounded-lg text-white\" value={editingProduct.title} onChange={(e) => setEditingProduct({...editingProduct, title: e.target.value})} />\n                            </div>\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-xs font-medium text-neutral-400 mb-1\">Price</label>\n                                    <input type=\"number\" className=\"w-full p-3 bg-black/50 border border-white/10 rounded-lg text-white\" value={editingProduct.price} onChange={(e) => setEditingProduct({...editingProduct, price: e.target.value})} />\n                                </div>\n                                <div>\n                                    <label className=\"block text-xs font-medium text-neutral-400 mb-1\">Category</label>\n                                    <select className=\"w-full p-3 bg-black/50 border border-white/10 rounded-lg text-white\" value={editingProduct.category} onChange={(e) => setEditingProduct({...editingProduct, category: e.target.value})}>\n                                        <option>Transitions</option><option>Project Files</option><option>Color</option><option>Titles</option><option>Overlays</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div>\n                                <label className=\"block text-xs font-medium text-neutral-400 mb-1\">Description</label>\n                                <textarea className=\"w-full p-3 bg-black/50 border border-white/10 rounded-lg text-white h-24\" value={editingProduct.description} onChange={(e) => setEditingProduct({...editingProduct, description: e.target.value})} />\n                            </div>\n                            <div>\n                                <label className=\"block text-xs font-medium text-neutral-400 mb-1\">New Thumbnail (Optional)</label>\n                                <input type=\"file\" accept=\"image/*\" onChange={(e) => setEditThumbnailFile(e.target.files[0])} className=\"w-full text-sm text-neutral-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:bg-purple-600 file:text-white\" />\n                            </div>\n                            <button type=\"submit\" disabled={isUploading} className=\"w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-bold mt-2\">\n                                {isUploading ? \"Updating...\" : \"Save Changes\"}\n                            </button>\n                        </form>\n                    </div>\n                </div>\n              )}\n\n              {/* NEW FACE MODAL with \"Register\" option */}\n              {isFaceVerifying && (\n                  <div className=\"fixed inset-0 bg-black z-[60] flex flex-col items-center justify-center\">\n                      <div className=\"relative w-full max-w-md aspect-[4/5] bg-neutral-900 rounded-3xl overflow-hidden border-2 border-blue-500/50\">\n                          <video ref={videoRef} autoPlay muted className=\"w-full h-full object-cover\" />\n                          <div className=\"absolute bottom-10 w-full text-center space-y-4\">\n                              <p className=\"text-white font-bold text-lg bg-black/50 py-1 px-4 rounded-full inline-block\">{faceStatus}</p>\n                              \n                              {/* Only show Register button if in Registration Mode */}\n                              {authStep === 'register-face' && (\n                                  <button \n                                      onClick={handleRegisterFace}\n                                      className=\"px-6 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-full shadow-lg transition-transform hover:scale-105 flex items-center gap-2 mx-auto\"\n                                  >\n                                      <ScanFace className=\"w-5 h-5\" /> Secure My Face ID\n                                  </button>\n                              )}\n\n                              {/* Manual Scan Trigger for Verification */}\n                              {authStep === 'verify-face' && (\n                                  <button \n                                      onClick={() => handleVerifyFace()}\n                                      className=\"px-6 py-2 bg-blue-600/80 hover:bg-blue-500 text-white text-sm font-bold rounded-full shadow-lg mx-auto\"\n                                  >\n                                      Scan Now\n                                  </button>\n                              )}\n                          </div>\n                      </div>\n                  </div>\n              )}\n              \n              {activeTab === 'store' && <footer className=\"border-t border-white/10 bg-neutral-950/80 backdrop-blur-md pt-8 pb-8\"><div className=\"max-w-7xl mx-auto px-4 flex justify-between\"><p className=\"text-neutral-600 text-sm\">Â© 2024 Edit.Flow.</p><div className=\"flex gap-4\">{!isSessionActive && <button onClick={() => setShowAdminLogin(true)} className=\"text-neutral-600 text-sm flex gap-1\"><Lock className=\"w-3 h-3\" /> Admin</button>}</div></div></footer>}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// --- WRAPPER FOR ERROR BOUNDARY ---\nconst AppWrapper = () => (\n  <ErrorBoundary>\n    <App />\n  </ErrorBoundary>\n);\n\nexport default AppWrapper;","usedDeprecatedRules":[]},{"filePath":"D:\\editing site\\edit.flow\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\editing site\\edit.flow\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\editing site\\edit.flow\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]